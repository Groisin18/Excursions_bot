Telegram-ะฑะพั ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ัะบัะบัััะธะพะฝะฝะพะณะพ ะฑะธะทะฝะตัะฐ. ะัะพะตะบั ะพะฑัะตะดะธะฝัะตั CRM, ัะธััะตะผั ะฑัะพะฝะธัะพะฒะฐะฝะธั, ัะธะฝะฐะฝัะพะฒัะน ััะตั ะธ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั, ะฟะพะทะฒะพะปัั ัะฟัะฐะฒะปััั ะฒัะตะผะธ ะฐัะฟะตะบัะฐะผะธ ะฑะธะทะฝะตัะฐ ะฝะฐะฟััะผัั ะธะท Telegram.

ะกัะฐััั: ะะตะฐะปัะฝัะน ะฑะธะทะฝะตั-ะฟัะพะตะบั ะฒ ะฐะบัะธะฒะฝะพะน ัะฐะทัะฐะฑะพัะบะต.
ะะฐะทัะฐะฑะพััะธะบ: ะฃัะตะฑะฝัะน ะฟัะพะตะบั ะพะดะฝะพะณะพ ัะฐะทัะฐะฑะพััะธะบะฐ ะฒ production-ััะตะดะต.

ะัะฝะพะฒะฝัะต ัะฐัะฐะบัะตัะธััะธะบะธ
ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะฐั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั ะฒะฝัััะธ Telegram
ะะฝัะตะณัะฐัะธั ั YooKassa ะดะปั ะพะฝะปะฐะนะฝ-ะพะฟะปะฐัั
ะกะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ัะฐัะฟะธัะฐะฝะธะตะผ ะบะฐะฟะธัะฐะฝะพะฒ ะธ ัะบัะบัััะธะน
ะกะธััะตะผะฐ ะปะพะณะธัะพะฒะฐะฝะธั ั ัะพัะฐัะธะตะน
ะะพะดะดะตัะถะบะฐ ัะตะณะธัััะฐัะธะธ ะดะตัะตะน ัะตัะตะท ัะพะบะตะฝ-ัะธััะตะผั
ะะพะผะฟะปะฐะตะฝั ั 152-ะคะ (ัะพะณะปะฐัะธะต ะฝะฐ ะพะฑัะฐะฑะพัะบั ะะ)

ะะพะทะผะพะถะฝะพััะธ
ะะปั ะบะปะธะตะฝัะพะฒ
ะะตะณะธัััะฐัะธั (ะฟะพะปะฝะฐั ะธะปะธ ะฟะพ ัะพะบะตะฝั ะดะปั ะดะตัะตะน ะดะพ 14 ะปะตั)
ะะธัะฝัะน ะบะฐะฑะธะฝะตั ั ะธััะพัะธะตะน ะฑัะพะฝะธัะพะฒะฐะฝะธะน
ะัะพัะผะพัั ัะบัะบัััะธะน ั ะพะฟะธัะฐะฝะธะตะผ ะธ ัะฐัะฟะธัะฐะฝะธะตะผ
ะะฝะปะฐะนะฝ-ะฑัะพะฝะธัะพะฒะฐะฝะธะต ั ะฒัะฑะพัะพะผ ะดะฐัั ะธ ะฒัะตะผะตะฝะธ
ะะฟะปะฐัะฐ ัะตัะตะท YooKassa (ะบะฐััั, ะกะะ, ะบะพัะตะปัะบะธ)
ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟัะพัะธะปั

ะะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ
ะฃะฟัะฐะฒะปะตะฝะธะต ัะบัะบัััะธัะผะธ (ัะพะทะดะฐะฝะธะต, ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต, ะดะตะฐะบัะธะฒะฐัะธั)
ะะฐัะฟะธัะฐะฝะธะต (ัะพะทะดะฐะฝะธะต ัะปะพัะพะฒ, ะฝะฐะทะฝะฐัะตะฝะธะต ะบะฐะฟะธัะฐะฝะพะฒ, ะบะพะฝััะพะปั ะทะฐะณััะทะบะธ)
ะฃะฟัะฐะฒะปะตะฝะธะต ะบะปะธะตะฝัะฐะผะธ (ะฟะพะธัะบ, ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต, ะธััะพัะธั)
ะะฐะฟะธัะฐะฝั (ะฝะฐะทะฝะฐัะตะฝะธะต, ะณัะฐัะธะบ ัะฐะฑะพัั, ะทะฐัะฟะปะฐัะฐ)
ะคะธะฝะฐะฝัั (ะพััะปะตะถะธะฒะฐะฝะธะต ะฟะปะฐัะตะถะตะน, ัะฐััะพะดั, ะพััะตัะฝะพััั)
ะัะพะผะพะบะพะดั (ัะพะทะดะฐะฝะธะต, ะฐะบัะธะฒะฐัะธั, ััะฐัะธััะธะบะฐ)
ะฃะฒะตะดะพะผะปะตะฝะธั (ะผะฐััะพะฒัะต ะธ ะฟะตััะพะฝะฐะปัะฝัะต ัะฐัััะปะบะธ)
ะกัะฐัะธััะธะบะฐ (ะทะฐะณััะทะบะฐ, ะดะพัะพะดั, ะฟะพะฟัะปััะฝัะต ัะบัะบัััะธะธ)

ะขะตัะฝะธัะตัะบะธะต ะพัะพะฑะตะฝะฝะพััะธ
ะัะธะฝััะพะฝะฝะฐั ะฐััะธัะตะบัััะฐ ะฝะฐ aiogram 3.x
ะัะพัะตััะธะพะฝะฐะปัะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ั ัะฐะทะดะตะปะตะฝะธะตะผ ะฟะพ ัะธะฟะฐะผ ัะพะฑััะธะน
ะกะธััะตะผะฐ ะฒะธัััะฐะปัะฝัั ัะตะปะตัะพะฝะพะฒ ะดะปั ะฑะตะทะพะฟะฐัะฝะพะน ัะตะณะธัััะฐัะธะธ ะดะตัะตะน
Middleware ะดะปั ะบะพะฝััะพะปั ะดะพัััะฟะฐ ะบ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ัะตะปะพััะฝะพััะธ ะฑะฐะทั ะดะฐะฝะฝัั

ะััะธัะตะบัััะฐ
ะัะพะตะบั ะฟะพัััะพะตะฝ ะฟะพ ะผะพะดัะปัะฝะพะน ะฐััะธัะตะบัััะต ั ัะตัะบะธะผ ัะฐะทะดะตะปะตะฝะธะตะผ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:


๐ ะกัััะบัััะฐ ะบะฐัะฐะปะพะณะพะฒ:
โโโ ๐ Project
    โโโ ๐ app
    โ   โโโ ๐ admin_panel
    โ   โ   โโโ ๐ services
    โ   โ   โ   โโโ ๐ export_service.py
    โ   โ   โ   โโโ ๐ statistics_service.py
    โ   โ   โโโ ๐ keyboards_adm.py
    โ   โ   โโโ ๐ states_adm.py
    โ   โโโ ๐ database
    โ   โ   โโโ ๐ models.py
    โ   โ   โโโ ๐ requests.py
    โ   โโโ ๐ middlewares
    โ   โ   โโโ ๐ __init__.py
    โ   โ   โโโ ๐ admin_middleware.py
    โ   โโโ ๐ migrations
    โ   โ   โโโ ๐ add_missing_indexes.py
    โ   โ   โโโ ๐ check_integrity.py
    โ   โ   โโโ ๐ init.py
    โ   โ   โโโ ๐ requirements-migrations.txt
    โ   โโโ ๐ routers
    โ   โ   โโโ ๐ admin
    โ   โ   โ   โโโ ๐ admin_main_router.py
    โ   โ   โ   โโโ ๐ bookings.py
    โ   โ   โ   โโโ ๐ captains.py
    โ   โ   โ   โโโ ๐ clients.py
    โ   โ   โ   โโโ ๐ excursions.py
    โ   โ   โ   โโโ ๐ finances.py
    โ   โ   โ   โโโ ๐ notification.py
    โ   โ   โ   โโโ ๐ promocodes.py
    โ   โ   โ   โโโ ๐ schedule.py
    โ   โ   โ   โโโ ๐ settings.py
    โ   โ   โ   โโโ ๐ statistic.py
    โ   โ   โโโ ๐ __init__.py
    โ   โ   โโโ ๐ fallback_router.py
    โ   โ   โโโ ๐ payment_router.py
    โ   โ   โโโ ๐ README.md  #ะดะปั ัะพััะตัะพะฒ
    โ   โ   โโโ ๐ redaction_router.py
    โ   โ   โโโ ๐ registration_router.py
    โ   โ   โโโ ๐ user_router.py
    โ   โโโ ๐ utils
    โ   โ   โโโ ๐ auth.py
    โ   โ   โโโ ๐ datetime_utils.py
    โ   โ   โโโ ๐ logging_config.py
    โ   โ   โโโ ๐ token_utils.py
    โ   โ   โโโ ๐ validation.py
    โ   โโโ ๐ keyboards.py
    โ   โโโ ๐ states.py
    โโโ ๐ logs
    โ   โโโ ๐ admin.log
    โ   โโโ ๐ bot.log
    โ   โโโ ๐ database.log
    โ   โโโ ๐ errors.log
    โ   โโโ ๐ payments.log
    โ   โโโ ๐ user_actions.log
    โโโ ๐ scripts
    โ   โโโ ๐ collect2.py
    โ   โโโ ๐ manage_migrations.py
    โโโ ๐ .env
    โโโ ๐ database.db
    โโโ ๐ enhanced_project_report_Artem_project.txt
    โโโ ๐ README.md
    โโโ ๐ requirements.txt
    โโโ ๐ run.py
    โโโ ๐ soglasie na obrabotku PD nesoversh.pdf
    โโโ ๐ soglasie na obrabotku PD.pdf
	


ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ
ะคัะตะนะผะฒะพัะบ ะฑะพัะฐ: Aiogram	3.22.0
ะะฐะทะฐ ะดะฐะฝะฝัั: SQLite + SQLAlchemy 2.0.43
ะะปะฐัะตะถะธ: YooKassaAPI
ะะฐะปะธะดะฐัะธั: Pydantic 2.11.10
ะะพะฝัะธะณััะฐัะธั: python-dotenv	1.1.1
HTTP-ะบะปะธะตะฝั: aiohttp 3.12.15
ะะพะณะธัะพะฒะฐะฝะธะต: logging + RotatingFileHandler

ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ
ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั
Python 3.11 ะธะปะธ ะฝะพะฒะตะต
Telegram Bot Token ะพั @BotFather
ะขะตััะพะฒัะน ะธะปะธ ะฟะพะปะฝะพัะตะฝะฝัะน ัะพะบะตะฝ YooKassa

ะจะฐะณ 1: ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต (ะฟัะธะผะตั)
cd C:\Users\admin\Desktop
# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python -m venv venv
venv\Scripts\activate  # Windows
# ะธะปะธ
source venv/bin/activate  # Linux/Mac

ะจะฐะณ 2: ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
bash
pip install -r requirements.txt

ะจะฐะณ 3: ะะพะฝัะธะณััะฐัะธั
ะกะพะทะดะฐะนัะต ัะฐะนะป .env ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

TG_TOKEN = ะฒะฐั_ัะพะบะตะฝ_ะฑะพัะฐ
PAYMENTS_TOKEN = ะฒะฐั_ัะพะบะตะฝ_yookassa

# ะะพะณะธัะพะฒะฐะฝะธะต
LOG_LEVEL=INFO
ENABLE_CONSOLE_LOGGING=false
ENABLE_FILE_LOGGING=true
ROTATION_MAX_SIZE_MB=10
ROTATION_BACKUP_COUNT=5

# ะะฐะทะฐ ะดะฐะฝะฝัั
SQL_LOGGING_ENABLED=false
SQLALCHEMY_ECHO=false

ะจะฐะณ 4: ะะฐะฟััะบ
bash
python run.py
ะะฐะทะฐ ะดะฐะฝะฝัั ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต.

ะะพะฝัะธะณััะฐัะธั
ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (.env)
ะะตัะตะผะตะฝะฝะฐั	ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั	ะะฟะธัะฐะฝะธะต
TG_TOKEN	ะขะพะบะตะฝ Telegram-ะฑะพัะฐ
PAYMENTS_TOKEN	ะขะพะบะตะฝ YooKassa
LOG_LEVEL	INFO	ะฃัะพะฒะตะฝั ะดะตัะฐะปะธะทะฐัะธะธ ะปะพะณะพะฒ
ENABLE_FILE_LOGGING	true	ะะฐะฟะธัั ะปะพะณะพะฒ ะฒ ัะฐะนะปั
ROTATION_MAX_SIZE_MB	10	ะะฐะบั. ัะฐะทะผะตั ัะฐะนะปะฐ ะปะพะณะฐ (ะะ)
ROTATION_BACKUP_COUNT	5	ะะพะปะธัะตััะฒะพ ัะพัะธััะตะผัั ัะฐะนะปะพะฒ

ะะพะณะธัะพะฒะฐะฝะธะต
ะกะธััะตะผะฐ ัะพะทะดะฐะตั ะพัะดะตะปัะฝัะต ะปะพะณะธ ะดะปั ัะฐะทะฝัั ะบะพะผะฟะพะฝะตะฝัะพะฒ:
logs/bot.log - ะัะฝะพะฒะฝัะต ัะพะฑััะธั ะฑะพัะฐ
logs/admin.log - ะะตะนััะฒะธั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ
logs/payments.log - ะะปะฐัะตะถะฝัะต ะพะฟะตัะฐัะธะธ
logs/database.log - ะะฐะฟัะพัั ะบ ะะ
logs/user_actions.log - ะะตะนััะฒะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
logs/errors.log - ะัะธะฑะบะธ ะธ ะธัะบะปััะตะฝะธั

ะะธะทะฝะตั-ะปะพะณะธะบะฐ
ะฆะตะฝะพะพะฑัะฐะทะพะฒะฐะฝะธะต
ะคะธะบัะธัะพะฒะฐะฝะฝะฐั ัะตะฝะฐ ะทะฐ ะผะตััะพ ะฝะฐ ะบะพะฝะบัะตัะฝัะน ะฒะธะด ัะบัะบัััะธะธ
ะะตั ะดะธััะตัะตะฝัะธะฐัะธะธ ะฟะพ ะฒะพะทัะฐััั, ะฒะตัั ะธะปะธ ะบะพะปะธัะตััะฒั ะปัะดะตะน
ะกัะพะธะผะพััั ะพะฟัะตะดะตะปัะตััั ะฒ ะฝะฐัััะพะนะบะฐั ัะบัะบัััะธะธ ะฐะดะผะธะฝะธัััะฐัะพัะพะผ

ะะตะณะธัััะฐัะธั ะดะตัะตะน
ะะพะดะธัะตะปั ัะตะณะธัััะธััะตััั ััะฐะฝะดะฐััะฝัะผ ัะฟะพัะพะฑะพะผ
ะะปั ัะตะฑะตะฝะบะฐ ะณะตะฝะตัะธััะตััั ัะพะบะตะฝ (ะฟัะธะฒัะทะฐะฝ ะบ ะฝะพะผะตัั ัะพะดะธัะตะปั)
ะขะพะบะตะฝ ะธัะฟะพะปัะทัะตััั ะดะปั ะฑััััะพะน ัะตะณะธัััะฐัะธะธ ัะตะฑะตะฝะบะฐ
ะัะธ ะดะพััะธะถะตะฝะธะธ 14 ะปะตั ัะตะฑะตะฝะพะบ ะผะพะถะตั ะฐะบัะธะฒะธัะพะฒะฐัั ะฟะพะปะฝัะน ะฐะบะบะฐัะฝั, ะฒะฒะตะดั ัะพะบะตะฝ
ะะธัััะฐะปัะฝัะน ัะตะปะตัะพะฝ: ัะพะดะธัะตะปััะบะธะน_ะฝะพะผะตั:ัะพะบะตะฝ:child
ะัะธะผะตั: +79512345678:1PLGuR:child

ะะพะดะตะปะธ ะฑะฐะทั ะดะฐะฝะฝัั
ะัะฝะพะฒะฝัะต ัะฐะฑะปะธัั:
users - ะะพะปัะทะพะฒะฐัะตะปะธ ัะธััะตะผั
excursions - ะญะบัะบัััะธะธ
excursion_slots - ะกะปะพัั ัะบัะบัััะธะน
bookings - ะัะพะฝะธัะพะฒะฐะฝะธั
payments - ะะปะฐัะตะถะธ
promo_codes - ะัะพะผะพะบะพะดั
notifications - ะฃะฒะตะดะพะผะปะตะฝะธั

ะกะธััะตะผะฐ ัะพะปะตะน
client - ะะฑััะฝัะน ะฟะพะปัะทะพะฒะฐัะตะปั
captain - ะะฐะฟะธัะฐะฝ (ะฟัะพะฒะพะดะธั ัะบัะบัััะธะธ)
admin - ะะดะผะธะฝะธัััะฐัะพั (ะฟะพะปะฝัะน ะดะพัััะฟ ะบ ัะธััะตะผะต ัะฟัะฐะฒะปะตะฝะธั)

ะกะพะณะปะฐัะธะต ะฝะฐ ะพะฑัะฐะฑะพัะบั ะะ
ะะพะปัะทะพะฒะฐัะตะปั ะดะฐะตั ัะพะณะปะฐัะธะต ะฒะฝัััะธ ะฑะพัะฐ
ะคะปะฐะณ ัะพะณะปะฐัะธั ััะฐะฝะธััั ะฒ ะะ
ะขะตะบัั ัะพะณะปะฐัะธั ัะพะพัะฒะตัััะฒัะตั ััะตะฑะพะฒะฐะฝะธัะผ 152-ะคะ
ะะดะผะธะฝะธัััะฐัะพั ะผะพะถะตั ัะบัะฟะพััะธัะพะฒะฐัั ัะฟะธัะพะบ ัะพะณะปะฐัะธะฒัะธััั


ะะพัะพะถะฝะฐั ะบะฐััะฐ
ะััะพะบะธะน ะฟัะธะพัะธัะตั

ะััะธัะพะฒะฐะฝะธะต ัะฐััะพ ะธัะฟะพะปัะทัะตะผัั ะดะฐะฝะฝัั
ะะพัะฐะฑะพัะบะฐ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
ะะฒะพะด ะฟะปะฐัะตะถะฝะพะน ัะธััะตะผั ะดะปั ะบะปะธะตะฝัะฐ


ะกัะตะดะฝะธะน ะฟัะธะพัะธัะตั
ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธั ัะฒะตะดะพะผะปะตะฝะธะน, ะฝะพัะธัะธะบะฐัะธั ะพั ะฐะดะผะธะฝะฐ ะบะปะธะตะฝัะฐะผ
ะะพะฑะฐะฒะปะตะฝะธะต Redis
ะะฐัััะพะธัั Celery ะดะปั ัะพะฝะพะฒัั ะทะฐะดะฐั
ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ะฒ Doัker ะธ ะดะตะฟะปะพะน
ะะตัะตัะพะด ะฝะฐ PostgreSQL

ะะพะปะณะพััะพัะฝัะต ะฟะปะฐะฝั
Google Calendar ะดะปั ะบะฐะฟะธัะฐะฝะพะฒ


ะะธัะตะฝะทะธั ะธ ะบะพะผะฟะปะฐะตะฝั
ะญัะพ ะฟัะพะฟัะธะตัะฐัะฝะพะต ะฟัะพะณัะฐะผะผะฝะพะต ะพะฑะตัะฟะตัะตะฝะธะต, ัะฐะทัะฐะฑะพัะฐะฝะฝะพะต ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ะฑะธะทะฝะตัะฐ. 
ะะพะด ะฝะต ะฟะพะดะปะตะถะธั ัะฒะพะฑะพะดะฝะพะผั ัะฐัะฟัะพัััะฐะฝะตะฝะธั, ะผะพะดะธัะธะบะฐัะธะธ ะธะปะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฑะตะท ัะฒะฝะพะณะพ ัะฐะทัะตัะตะฝะธั ะฟัะฐะฒะพะพะฑะปะฐะดะฐัะตะปั.